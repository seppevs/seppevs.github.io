{"componentChunkName":"component---src-templates-blog-post-js","path":"/npm-link/","webpackCompilationHash":"","result":{"data":{"markdownRemark":{"html":"<h2>What?</h2>\n<p>With <code>npm link</code> you can depend on other Node modules without having to rely on a NPM repository.\nIt also saves you from specifying some complex path to the dependency on your file system.</p>\n<p>Using the dependency works as it was resolved through a NPM repository.</p>\n<h2>Why?</h2>\n<p>Maybe the dependency is still under development or a private NPM repository is overkill for your project?</p>\n<h2>An Example</h2>\n<h3>The Farm application</h3>\n<p>Imagine we're creating this 'farm' application. It has two files:</p>\n<h4>app.js:</h4>\n<p>{% highlight JavaScript %}\nvar cow = require('farm-cow');\ncow.talk(function(text) {\nconsole.log(\"The cow says: \" + text);\n});\n{% endhighlight %}</p>\n<h4>package.json:</h4>\n<p>{% highlight JavaScript %}\n{\n\"name\": \"farm\",\n\"version\": \"1.0.0\",\n\"description\": \"A farm\",\n\"main\": \"app.js\",\n\"dependencies\": {\n\"farm-cow\": \"1.0.0\"\n},\n\"author\": \"Developer\",\n\"license\": \"MIT\"\n}\n{% endhighlight %}</p>\n<p>As you can see, this application depends on the <code>farm-cow</code> module. This dependency is not part of our application and is still under development by someone else.</p>\n<h3>The dependency: farm-cow</h3>\n<p>This module has two files:</p>\n<h4>farm-cow.js:</h4>\n<p>{% highlight JavaScript %}\nexports.talk = function(callback) {\ncallback(\"mmmooooooooo\");\n};\n{% endhighlight %}</p>\n<h4>package.json:</h4>\n<p>{% highlight JavaScript %}\n{\n\"name\": \"farm-cow\",\n\"version\": \"1.0.0\",\n\"description\": \"Farm Cow\",\n\"main\": \"farm-cow.js\",\n\"author\": \"Other developer\",\n\"license\": \"MIT\"\n}\n{% endhighlight %}</p>\n<h3>The problem</h3>\n<p>When we try to run the farm application, an error is thrown:</p>\n<p>{% highlight Bash %}\n$ node app.js\nmodule.js:338\nthrow err;\n^\nError: Cannot find module 'farm-cow'\nat Function.Module.<em>resolveFilename (module.js:336:15)\nat Function.Module.</em>load (module.js:278:25)\nat Module.require (module.js:365:17)\nat require (module.js:384:17)\nat Object.<anonymous> (/home/team/farm/app.js:1:73)\nat Module.<em>compile (module.js:460:26)\nat Object.Module.</em>extensions..js (module.js:478:10)\nat Module.load (module.js:355:32)\nat Function.Module._load (module.js:310:12)\nat Function.Module.runMain (module.js:501:10)\n{% endhighlight %}</p>\n<p>This is normal, because the farm-cow module is not available in the node_modules directory.</p>\n<p>Unfortunately, running <code>npm install</code> won't solve anything because the <code>farm-cow</code> module is not available in our NPM repository:</p>\n<p>{% highlight Bash %}\n$ npm install\nnpm WARN package.json farm@1.0.0 No repository field.\nnpm WARN package.json farm@1.0.0 No README data\nnpm ERR! Darwin 14.1.0\nnpm ERR! argv \"node\" \"/usr/local/bin/npm\" \"install\"\nnpm ERR! node v0.12.0\nnpm ERR! npm  v2.5.1\nnpm ERR! code E404</p>\n<p>npm ERR! 404 Not Found: farm-cow\nnpm ERR! 404\nnpm ERR! 404 'farm-cow' is not in the npm registry.\nnpm ERR! 404 You should bug the author to publish it (or use the name yoursel!)\nnpm ERR! 404 It was specified as a dependency of 'farm'\nnpm ERR! 404\nnpm ERR! 404 Note that you can also install from a\nnpm ERR! 404 tarball, folder, http url, or git url.</p>\n<p>npm ERR! Please include the following file with any support request:\nnpm ERR!     /home/team/farm/npm-debug.log\n{% endhighlight %}</p>\n<h3>Resolving with <code>npm link</code></h3>\n<p>Because we can reach the dependency through the file system, we can use <code>npm link</code> to resolve it.</p>\n<h4>Making the module available</h4>\n<p>Navigate to the dependency in our terminal:\n{% highlight Bash %}\n$ cd /home/other-team/farm-cow\n$ npm link\n/usr/local/lib/node_modules/farm-cow -> /home/other-team/farm-cow\n{% endhighlight %}</p>\n<p>The <code>npm link</code> command has created a symlink that points to the farm-cow directory. Note that it used the value of the 'name' attribute in the package.json file.</p>\n<h4>Using the module</h4>\n<p>Navigate to the module that requires this dependency:\n{% highlight Bash %}\n$ cd /home/team/farm\n$ npm link farm-cow\n/home/team/farm/node<em>modules/farm-cow -> /usr/local/lib/node</em>modules/farm-cow -> /home/other-team/farm-cow\n{% endhighlight %}</p>\n<p>The <code>npm link</code> command has now created another symlink to the application that needs the directory.</p>\n<h4>Verify</h4>\n<p>Running the farm <code>app.js</code> will work now because the farm-cow module is resolved through the symlink:</p>\n<p>{% highlight Bash %}\n$ node app.js\nThe cow says: mmmooooooooo\n{% endhighlight %}</p>\n<h3>Unlinking</h3>\n<p>We can break the link by using the <code>npm unlink</code> command in the farm application:</p>\n<p>{% highlight Bash %}\n$ npm unlink farm-cow\nunbuild farm-cow@1.0.0\n{% endhighlight %}</p>","frontmatter":{"title":"NPM Link"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/npm-link/"}}}